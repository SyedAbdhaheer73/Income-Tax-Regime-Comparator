<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Income Tax Regime Comparator (FY 2025-26)</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f6f7fb;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 10px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    .result {
      margin-top: 20px;
      background: #f1f5f9;
      padding: 15px;
      border-radius: 5px;
    }
    .highlight {
      font-weight: bold;
      color: green;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Income Tax Regime Comparator</h1>

    <label>Annual Gross Income (₹)</label>
    <input type="number" id="income" placeholder="e.g. 1200000" />

    <label>Income Type</label>
    <select id="incomeType">
      <option value="salaried">Salaried</option>
      <option value="nonSalaried">Non-Salaried</option>
    </select>

    <label>Deductions (Old Regime Only – ₹)</label>
    <input type="number" id="deductions" placeholder="e.g. 150000" />

    <button onclick="calculateTax()">Compare Tax</button>

    <div class="result" id="result"></div>
  </div>

  <script>
    const STANDARD_DEDUCTION = 75000;
    const CESS_RATE = 0.04;

    function calculateNewRegimeTax(grossIncome, isSalaried) {
      let taxableIncome = grossIncome;

      if (isSalaried) {
        taxableIncome -= STANDARD_DEDUCTION;
      }

      taxableIncome = Math.max(0, taxableIncome);

      let tax = 0;

      // New Regime Slabs FY 2025-26
      if (taxableIncome > 400000) {
        tax += (Math.min(taxableIncome, 800000) - 400000) * 0.05;
      }
      if (taxableIncome > 800000) {
        tax += (Math.min(taxableIncome, 1200000) - 800000) * 0.10;
      }
      if (taxableIncome > 1200000) {
        tax += (Math.min(taxableIncome, 1600000) - 1200000) * 0.15;
      }
      if (taxableIncome > 1600000) {
        tax += (Math.min(taxableIncome, 2000000) - 1600000) * 0.20;
      }
      if (taxableIncome > 2000000) {
        tax += (taxableIncome - 2000000) * 0.30;
      }

      // ✅ Section 87A Rebate (KEY FIX)
      if (taxableIncome <= 1200000) {
        tax = 0;
      }

      if (tax > 0) {
        tax += tax * CESS_RATE;
      }

      return Math.round(tax);
    }

    function calculateOldRegimeTax(grossIncome, deductions, isSalaried) {
      let taxableIncome = grossIncome - deductions;

      if (isSalaried) {
        taxableIncome -= STANDARD_DEDUCTION;
      }

      taxableIncome = Math.max(0, taxableIncome);

      let tax = 0;

      // Old Regime Slabs
      if (taxableIncome > 250000) {
        tax += (Math.min(taxableIncome, 500000) - 250000) * 0.05;
      }
      if (taxableIncome > 500000) {
        tax += (Math.min(taxableIncome, 1000000) - 500000) * 0.20;
      }
      if (taxableIncome > 1000000) {
        tax += (taxableIncome - 1000000) * 0.30;
      }

      // Section 87A (Old Regime)
      if (taxableIncome <= 500000) {
        tax = 0;
      }

      if (tax > 0) {
        tax += tax * CESS_RATE;
      }

      return Math.round(tax);
    }

    function calculateTax() {
      const income = Number(document.getElementById("income").value);
      const deductions = Number(document.getElementById("deductions").value || 0);
      const incomeType = document.getElementById("incomeType").value;

      if (!income || income <= 0) {
        alert("Please enter valid income");
        return;
      }

      const isSalaried = incomeType === "salaried";

      const newTax = calculateNewRegimeTax(income, isSalaried);
      const oldTax = calculateOldRegimeTax(income, deductions, isSalaried);

      let better = newTax < oldTax ? "New Regime" : "Old Regime";

      document.getElementById("result").innerHTML = `
        <p><strong>New Regime Tax:</strong> ₹${newTax}</p>
        <p><strong>Old Regime Tax:</strong> ₹${oldTax}</p>
        <p class="highlight">Better Option: ${better}</p>
      `;
    }
  </script>
</body>
</html>
